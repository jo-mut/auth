{"version":3,"sources":["backend/mailtrap/core.cljs"],"mappings":";AAMA,AAASA;AACT,AAAKC,8BAAM,AAAkBC;AAE7B,+BAAA,WAAA,kCAAA,5EAAKC;AAIL,wCAAA,xCAAMC;AAAN,AACE,YAAAC,8CAAA,WAA6BJ;;AAG/B,6BAAA,7BAAMK,kEAAMC,WAAWC;AAAvB,OAEG,2CAAA,qEAAA,4HAAA,5OAAOJ,qDAA8BD,oCACAI,qDAEA,AAACE,6DAAsCD,3MAE5E,yQAAO,WAAKE,3RAEZ;AAFO,AACE,mBAAA,ZAACC,oCAAuCD;UACzC,WAAKE;AAAL,AACE,mBAAA,ZAACD,mCAAsCC","names":["js/shadow.js.shim.module$dotenv","backend.mailtrap.core/TOKEN","js/process.env","backend.mailtrap.core/sender","backend.mailtrap.core/mailtrap-client","js/shadow.js.shim.module$mailtrap.MailtrapClient","backend.mailtrap.core/send","recipients","verification-token","backend.mailtrap.email-templates/verification-email-template","res","js/console.log","err"],"sourcesContent":["(ns backend.mailtrap.core\n  (:require\n   [\"dotenv\" :as dotenv]\n   [\"mailtrap\" :refer [MailtrapClient]]\n   [backend.mailtrap.email-templates :as templates]))\n\n(.config dotenv)\n(def TOKEN (.-MAILTRAP_TOKEN js/process.env))\n\n(def sender\n  #js {:email \"hello@demomailtrap.com\"\n       :name \"JMN\"})\n\n(defn mailtrap-client []\n  (MailtrapClient. #js {:token TOKEN}))\n\n\n(defn send [recipients verification-token]\n  (->\n   (.send mailtrap-client #js {:from    sender\n                               :to      recipients\n                               :subject \"Verify your email!\"\n                               :html    (templates/verification-email-template verification-token)\n                               :category \"Email verification\"})\n   (.then (fn [res]\n            (js/console.log \"Email sent succefully\" res)))\n   (.catch (fn [err]\n             (js/console.log \"Failed to send email\" err)))))\n\n"]}