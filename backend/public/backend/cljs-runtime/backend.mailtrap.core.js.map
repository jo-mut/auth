{"version":3,"sources":["backend/mailtrap/core.cljs"],"mappings":";AAMA,AAASA;AACT,AAAKC,8BAAM,AAAkBC;AAE7B,+BAAA,WAAA,kCAAA,5EAAKC;AAIL,AAAKC,wCACH,KAAAC,8CAAA,WAA6BJ;AAG/B,6BAAA,7BAAMK,kEAAMC,WAAWC;AAAvB,AACE,YAAA,ZAACC,uBAA0BF,WAAWC;;OAErC,2CAAA,qEAAA,4HAAA,5OAAOJ,qDAA8BD,oCACAI,qDAEA,AAACG,6DAAsCF,3MAE5E,yQAAO,WAAKG,3RAEZ;AAFO,AACE,mBAAA,ZAACF,oCAAuCE;UACzC,WAAKC;AAAL,AACE,mBAAA,ZAACH,mCAAsCG","names":["js/shadow.js.shim.module$dotenv","backend.mailtrap.core/TOKEN","js/process.env","backend.mailtrap.core/sender","backend.mailtrap.core/mailtrap-client","js/shadow.js.shim.module$mailtrap.MailtrapClient","backend.mailtrap.core/send","recipients","verification-token","js/console.log","backend.mailtrap.email-templates/verification-email-template","res","err"],"sourcesContent":["(ns backend.mailtrap.core\n  (:require\n   [\"dotenv\" :as dotenv]\n   [\"mailtrap\" :refer [MailtrapClient]]\n   [backend.mailtrap.email-templates :as templates]))\n\n(.config dotenv)\n(def TOKEN (.-MAILTRAP_TOKEN js/process.env))\n\n(def sender\n  #js {:email \"hello@demomailtrap.com\"\n       :name \"JMN\"})\n\n(def mailtrap-client\n  (MailtrapClient. #js {:token TOKEN}))\n\n\n(defn send [recipients verification-token]\n  (js/console.log \"called: \" recipients verification-token)\n  (->\n   (.send mailtrap-client #js {:from    sender\n                               :to      recipients\n                               :subject \"Verify your email!\"\n                               :html    (templates/verification-email-template verification-token)\n                               :category \"Email verification\"})\n   (.then (fn [res]\n            (js/console.log \"Email sent succefully\" res)))\n   (.catch (fn [err]\n             (js/console.log \"Failed to send email\" err)))))\n\n"]}