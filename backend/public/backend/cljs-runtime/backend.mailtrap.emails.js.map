{"version":3,"sources":["backend/mailtrap/emails.cljs"],"mappings":";AAMA,kDAAA,lDAAMA,4GACHC,MAAMC;AADT,AAEE,iBAAA,CAAA,dAAMC,yBAA4BF;AAAlC,AAEG,2CAAA,qEAAA,4HAAA,5OAAOG,qDAAuCC,oCACAF,qDAEA,AAACG,6DAAsCJ,3MAErF,yQAAO,WAAKK,pRAEZ;AAFO,AACE,mBAAA,ZAACC,oCAAuCD;UACzC,WAAKE;AAAL,AACE,mBAAA,ZAACD,mCAAsCC;;;AAClD,OAACC,oBAAQ,WAAKD;AAAL,AACE,mBAAA,ZAACD,mCAAsCC;;;AAEtD,6CAAA,7CAAME,kGACHV,MAAMW;AADT,AAEE,iBAAA,CAAA,dAAMT,yBAA4BF;AAAlC,OAEG,2CAAA,qEAAA,uCAAA,8DAAA,uBAAA,yCAAA,rRAAOG,qDAAkDC,oCACAF,mKAIWS,5PAEpE,0TAAO,WAAKL,5UAEZ;AAFO,AACE,mBAAA,ZAACC,4CAA+CD;UACjD,WAAKE;AAAL,AACE,mBAAA,ZAACD,2CAA8CC","names":["backend.mailtrap.emails/send-verification-email","email","verification-token","recipients","backend.mailtrap.core/mailtrap-client","backend.mailtrap.core/sender","backend.mailtrap.email-templates/verification-email-template","res","js/console.log","err","promesa.core/catch","backend.mailtrap.emails/send-welcome-email","user-name"],"sourcesContent":["(ns backend.mailtrap.emails\n  (:require\n   [promesa.core :as p]\n   [backend.mailtrap.email-templates :as templates]\n   [backend.mailtrap.core :as m-client]))\n\n(defn send-verification-email\n  [email verification-token]\n  (let [recipients #js [#js {:email email}]]\n    (->\n     (.send m-client/mailtrap-client #js {:from    m-client/sender\n                                          :to      recipients\n                                          :subject \"Verify your email!\"\n                                          :html    (templates/verification-email-template verification-token)\n                                          :category \"Email verification\"})\n     (.then (fn [res]\n              (js/console.log \"Email sent succefully\" res)))\n     (.catch (fn [err]\n               (js/console.log \"Failed to send email\" err))))\n    (p/catch (fn [err]\n               (js/console.log \"failed to send email\" err)))))\n\n(defn send-welcome-email\n  [email user-name]\n  (let [recipients #js [#js {:email email}]]\n    (->\n     (.send m-client/mailtrap-client #js {:from               m-client/sender\n                                          :to                 recipients\n                                          :subject            \"Verify your email!\"\n                                          :template-uuid      \"b31b68ef-cabb-4506-9b77-bc56a8b2fde3\"\n                                          :template_variables #js {:company_info_name \"Auth\",\n                                                                   :name user-name}\n                                          :category           \"Welcome email verification\"})\n     (.then (fn [res]\n              (js/console.log \"Welcome email sent succefully\" res)))\n     (.catch (fn [err]\n               (js/console.log \"Failed to send welcome email\" err))))))"]}